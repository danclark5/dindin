<p id="notice"><%= notice %></p>

<p>
  <strong>Start:</strong>
  <%= @schedule.start_date%>
  <strong>End:</strong>
  <%= @schedule.end_date%>
</p>

<table>
  <tr>
    <th> Date </th>
    <th> Day </th>
    <th> Breakfast </th>
    <th> Lunch </th>
    <th> Dinner </th>
  </tr>
  <% @schedule.included_dates.each do |included_date| %>
    <tr>
      <td> <%= included_date %> </td>
      <td> <%= included_date.strftime('%A') %> </td>
      <td> <%= @schedule.meal_for(included_date, "Breakfast")&.meal&.name or link_to 'Add meal', new_scheduled_meal_path(date: included_date, meal_type_id: 2, schedule_id: @schedule.id) %></td>
      <td> <%= @schedule.meal_for(included_date, "Lunch")&.meal&.name or link_to 'Add meal', new_scheduled_meal_path(date: included_date, meal_type_id: 3, schedule_id: @schedule.id) %></td>
      <td> <%= @schedule.meal_for(included_date, "Dinner")&.meal&.name or link_to 'Add meal', new_scheduled_meal_path(date: included_date, meal_type_id: 1, schedule_id: @schedule.id) %></td>
    </tr>
  <% end %>
</table>

<%= link_to 'Edit', edit_schedule_path(@schedule) %> |
<%= link_to 'Back', schedules_path %>
