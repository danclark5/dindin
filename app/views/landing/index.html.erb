<% provide :title, "Home" %>

<% @meals.each do |meal| %>
  <div id="<%="scheduled_meal_#{meal[0].schedule_date.strftime('%F')}"%>" class=box>
    <h5 class="title is-5"> <%= "For #{meal[0].schedule_date.strftime('%A')}"%></h5>
    <% if meal[0].meal_id %>
      <div class="pb-3"><%= meal[0].meal_name %> </div>
    <% else %>
      <div class="pb-3">Nothing is planned.</div>
      <div class="pb-3">How about <%= meal[1].name %></div>
      <div>
          <a href="#" class="button is-primary" data-reflex="click->MealReflex#attach_suggested_meal"
                                                data-date="<%=meal[0].schedule_date.strftime('%F') %>"
                                                data-meal_id="<%=meal[1].id%>"
                                                data-reflex-root="#<%="scheduled_meal_#{meal[0].schedule_date.strftime('%F')}"%>"
                                                > Add </a>
          <a href="#" class="button is-primary" data-reflex="click->MealReflex#reload_suggested_meal"
                                                data-reflex-root="#<%="scheduled_meal_#{meal[0].schedule_date.strftime('%F')}"%>"
                                                > <span class="icon"> <i class="fa fa-refresh"></i> </span> </a>
      </div>
    <% end %>
  </div>
<% end %>

<%= link_to "Past Meals", root_path(start_date: @past_start_date), class: "button is-link" %>
<%= link_to "Future Meals", root_path(start_date: @future_start_date), class: "button is-link" %>

